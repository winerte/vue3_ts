import{r as M,a as R,b as G,c as J}from"./index-Dt8HJibp.js";import{d as K,m as i,n as L,i as O,p as Q,q as W,f as X,w as l,r as o,g as t,a as p,k as g,j as r,s as y,o as Y,_ as Z}from"./index-DWUQpKkY.js";const ee=["src"],te={class:"dialog-footer"},le=K({__name:"index",setup(ae){let x=i(),C=i(1),u=i(1),m=i(10),n=i(!1),b=i(""),d=L({id:0,tmName:"",logoUrl:"/api/static/img/sph/20241210/oppo.jpeg"});const N=i("undefined/product/fileUpload"),V=O(),z=Q(()=>({token:V.token||""})),_=async(a=1,e)=>{let c=await M(a,e);C.value=c.data.total,x.value=c.data.records,u.value=c.data.current,e=c.data.size};W(()=>{_(u.value,m.value)});const U=a=>{b.value="修改品牌",d.tmName=a.tmName,d.id=a.id,n.value=!0},q=async a=>{(await R(a)).code===200?(_(1,10),alert("删除成功")):alert("删除失败")},B=a=>{m.value=a,_(u.value,a)},h=a=>{u.value=a,_(a,m.value)},j=()=>{d.tmName="",b.value="添加品牌",n.value=!0},D=async()=>{d.id!=0?(await G(d)).code===200?(_(u.value,m.value),n.value=!1,alert("修改成功")):alert("修改失败"):(await J(d)).code===200?(_(u.value,m.value),n.value=!1,alert("添加成功")):alert("添加失败")};return(a,e)=>{const c=o("plus"),k=o("el-icon"),f=o("el-button"),v=o("el-table-column"),S=o("el-table"),T=o("el-pagination"),P=o("el-input"),w=o("el-form-item"),$=o("Plus"),A=o("el-upload"),E=o("el-form"),F=o("el-dialog"),H=o("el-card");return Y(),X(H,{class:"box-card"},{header:l(()=>[t(f,{class:"button",type:"primary",onClick:j},{default:l(()=>[t(k,{style:{"vertical-align":"middle"}},{default:l(()=>[t(c)]),_:1}),e[3]||(e[3]=p("span",null,"添加品牌",-1))]),_:1,__:[3]})]),default:l(()=>[t(S,{data:r(x),border:"",style:{width:"100%"}},{default:l(()=>[t(v,{type:"index",label:"序号",width:"80"}),t(v,{prop:"tmName",label:"品牌名称",width:"180"}),t(v,{label:"品牌logo"},{default:l(s=>[p("img",{src:s.row.logoUrl,style:{width:"24px",height:"24px"}},null,8,ee)]),_:1}),t(v,{prop:"edit",label:"品牌操作"},{default:l(s=>[t(f,{size:"mini",onClick:I=>U(s.row)},{default:l(()=>e[4]||(e[4]=[g("编辑")])),_:2,__:[4]},1032,["onClick"]),t(f,{size:"mini",type:"danger",onClick:I=>q(s.row.id)},{default:l(()=>e[5]||(e[5]=[g("删除")])),_:2,__:[5]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),p("span",null,[t(T,{onSizeChange:B,onCurrentChange:h,"current-page":r(u),"page-sizes":[5,10,20,30],"page-size":r(m),"prev-text":"上一页","next-text":"下一页",layout:"total,  prev, pager, next,sizes, jumper",total:r(C)},null,8,["current-page","page-size","total"])]),t(F,{title:r(b),modelValue:r(n),"onUpdate:modelValue":e[2]||(e[2]=s=>y(n)?n.value=s:n=s)},{footer:l(()=>[p("span",te,[t(f,{onClick:e[1]||(e[1]=s=>y(n)?n.value=!1:n=!1)},{default:l(()=>e[8]||(e[8]=[g("取 消")])),_:1,__:[8]}),t(f,{type:"primary",onClick:D},{default:l(()=>e[9]||(e[9]=[g("确 定")])),_:1,__:[9]})])]),default:l(()=>[t(E,{model:r(d),"label-width":"80px"},{default:l(()=>[t(w,{label:"品牌名称"},{default:l(()=>[t(P,{modelValue:r(d).tmName,"onUpdate:modelValue":e[0]||(e[0]=s=>r(d).tmName=s),placeholder:"请输入品牌名称"},null,8,["modelValue"])]),_:1}),t(w,{label:"品牌logo"},{default:l(()=>[t(A,{class:"upload-demo",drag:"",action:N.value,headers:z.value,multiple:""},{tip:l(()=>e[6]||(e[6]=[p("div",{class:"el-upload__tip"},"只能上传 jpg/png 文件，且不超过 500kb",-1)])),default:l(()=>[t(k,null,{default:l(()=>[t($)]),_:1}),e[7]||(e[7]=p("div",{class:"el-upload__text"},[g("将文件拖到此处，或"),p("em",null,"点击上传")],-1))]),_:1,__:[7]},8,["action","headers"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])]),_:1})}}}),se=Z(le,[["__scopeId","data-v-a6d8d667"]]);export{se as default};
