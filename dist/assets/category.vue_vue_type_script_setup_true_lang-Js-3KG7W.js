import{m as s,d as F,n as u,q as z,c as v,g as n,r as y,w as r,F as A,b as V,o as d,f as w}from"./index-Du_Ei7i5.js";const D=()=>s.get("admin/product/getCategory1"),E=l=>s.get(`admin/product/getCategory2/${l}`),M=l=>s.get(`admin/product/getCategory3/${l}`),O=(l,C,c)=>s.get(`admin/product/attrInfoList/${l}/${C}/${c}`),j=l=>s.delete(`admin/product/deleteAttr/${l}`),G=l=>s.post("admin/product/saveAttrInfo",l),H=F({__name:"category",props:{c1Id:{},c2Id:{},c3Id:{}},emits:["update:c1Id","update:c2Id","update:c3Id","categoryChange"],setup(l,{emit:C}){const c=l,o=C,_=u([]),h=u([]),g=u([]),p=u(c.c1Id||0),i=u(c.c2Id||0),m=u(c.c3Id||0),L=async()=>{try{let e=await D();_.value=Array.isArray(e)?e:e.data||[]}catch(e){console.error("获取一级分类失败:",e),_.value=[]}},q=async e=>{try{let t=await E(e);h.value=Array.isArray(t)?t:t.data||[],i.value=0,m.value=0,g.value=[],o("update:c2Id",0),o("update:c3Id",0),o("categoryChange",e,0,0)}catch(t){console.error("获取二级分类失败:",t),h.value=[]}},x=async e=>{try{let t=await M(e);g.value=Array.isArray(t)?t:t.data||[],m.value=0,o("update:c3Id",0),o("categoryChange",p.value,e,0)}catch(t){console.error("获取三级分类失败:",t),g.value=[]}},k=e=>{p.value=e,o("update:c1Id",e),q(e)},$=e=>{i.value=e,o("update:c2Id",e),x(e)},U=e=>{m.value=e,o("update:c3Id",e),o("categoryChange",p.value,i.value,e)};return z(()=>{L()}),(e,t)=>{const f=y("el-option"),I=y("el-select"),b=y("el-form-item"),B=y("el-form");return d(),v("div",null,[n(B,{inline:!0,size:"medium"},{default:r(()=>[n(b,{label:"一级分类","label-width":"80px"},{default:r(()=>[n(I,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),placeholder:"请选择",onChange:k,style:{width:"200px"}},{default:r(()=>[(d(!0),v(A,null,V(_.value,a=>(d(),w(f,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(b,{label:"二级分类"},{default:r(()=>[n(I,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=a=>i.value=a),placeholder:"请选择",onChange:$,style:{width:"200px"}},{default:r(()=>[(d(!0),v(A,null,V(h.value,a=>(d(),w(f,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(b,{label:"三级分类"},{default:r(()=>[n(I,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=a=>m.value=a),placeholder:"请选择",onChange:U,style:{width:"200px"}},{default:r(()=>[(d(!0),v(A,null,V(g.value,a=>(d(),w(f,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}});export{H as _,j as a,G as b,O as r};
