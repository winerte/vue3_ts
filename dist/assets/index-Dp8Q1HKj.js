import{y as F,d as G,q as W,x as K,m as c,i as X,p as Y,f as H,w as t,r as o,g as e,j as d,s as h,c as O,b as Z,F as Q,a as N,k as S,E as ee,o as $,l as M,v as T,_ as te}from"./index-DWUQpKkY.js";import{_ as le}from"./category.vue_vue_type_script_setup_true_lang-I_bQTCuS.js";import{d as oe}from"./index-Dt8HJibp.js";const ae=(m,i,u)=>F.get(`/admin/product/${m}/${i}?category3Id=${u}`),ne=()=>F.get("/admin/product/baseSaleAttrList"),se=m=>F.get(`/admin/product/spuImageList/${m}`),de=m=>F.get(`/admin/product/spuSaleAttrList/${m}`),ue=["src"],re=G({__name:"spuForm",props:{row:{}},emits:["changeSence"],setup(m,{emit:i}){const u=m;W(()=>{_(),v()}),K(()=>u.row,()=>{u.row&&(b(u.row.id),I(u.row.id))});let f=c([]);const _=async()=>{let a=await oe();a.code===200&&(f.value=a.data)},b=async a=>{let l=await se(a);l.code==200&&console.log(l.data)},I=async a=>{let l=await de(a);l.code==200&&console.log(l.data)},v=async()=>{let a=await ne();a.code==200&&console.log(a.data)};let g=c();const U=X(),z=Y(()=>({token:U.token||""})),A=c("undefined/product/fileUpload");let B=i;const D=()=>{B("changeSence",0)},q=()=>{console.log("保存成功"),ee.success({message:"恭喜你，这是一条成功消息",type:"success"})};return(a,l)=>{const s=o("el-input"),n=o("el-form-item"),x=o("el-option"),L=o("el-select"),y=o("plus"),w=o("el-icon"),k=o("el-upload"),R=o("el-dialog"),C=o("el-button"),V=o("el-table-column"),E=o("el-tag"),j=o("el-table"),r=o("el-form"),P=o("el-card");return $(),H(P,null,{default:t(()=>[e(r,{ref:"form",model:a.row,"label-width":"120px"},{default:t(()=>[e(n,{label:"spu名称"},{default:t(()=>[e(s,{modelValue:a.row.spuName,"onUpdate:modelValue":l[0]||(l[0]=p=>a.row.spuName=p)},null,8,["modelValue"])]),_:1}),e(n,{label:"spu品牌"},{default:t(()=>[e(L,{modelValue:d(g),"onUpdate:modelValue":l[1]||(l[1]=p=>h(g)?g.value=p:g=p),placeholder:"请选择",style:{width:"200px"}},{default:t(()=>[($(!0),O(Q,null,Z(d(f),(p,J)=>($(),H(x,{key:J,label:p.tmName,value:p.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"spu描述"},{default:t(()=>[e(s,{type:"textarea",autosize:"",placeholder:"请输入内容",modelValue:a.row.description,"onUpdate:modelValue":l[2]||(l[2]=p=>a.row.description=p)},null,8,["modelValue"])]),_:1}),e(n,{label:"spu照片"},{default:t(()=>[e(k,{action:A.value,headers:z.value,"list-type":"picture-card","on-preview":a.handlePictureCardPreview,"on-remove":a.handleRemove},{default:t(()=>[e(w,null,{default:t(()=>[e(y)]),_:1})]),_:1},8,["action","headers","on-preview","on-remove"]),e(R,{modelValue:a.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=p=>a.dialogVisible=p)},{default:t(()=>[N("img",{width:"100%",src:a.dialogImageUrl,alt:""},null,8,ue)]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"spu销售属性"},{default:t(()=>[e(L,{multiple:"",placeholder:"请选择111",style:{width:"200px"}},{default:t(()=>[e(x,{label:"请选择",value:""})]),_:1}),e(C,{type:"primary",icon:"plus",style:{"margin-left":"10px"}},{default:t(()=>l[4]||(l[4]=[S("添加")])),_:1,__:[4]}),e(j,{border:"",style:{margin:"10px 0"},width:"100%"},{default:t(()=>[e(V,{type:"index",label:"序号",width:"80"}),e(V,{label:"属性名"}),e(V,{label:"属性值"},{default:t(()=>[e(E,null,{default:t(()=>l[5]||(l[5]=[S("111")])),_:1,__:[5]})]),_:1}),e(V,{label:"操作"},{default:t(()=>[e(C,{type:"primary"},{default:t(()=>l[6]||(l[6]=[S("添加")])),_:1,__:[6]}),e(C,{type:"danger"},{default:t(()=>l[7]||(l[7]=[S("删除")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1}),e(n,null,{default:t(()=>[e(C,{type:"primary",onClick:q},{default:t(()=>l[8]||(l[8]=[S("保存")])),_:1,__:[8]}),e(C,{onClick:D},{default:t(()=>l[9]||(l[9]=[S("取消")])),_:1,__:[9]})]),_:1})]),_:1},8,["model"])]),_:1})}}}),ie=G({__name:"skuForm",emits:["changeSence"],setup(m,{emit:i}){let u=i;const f=()=>{u("changeSence",0)};return(_,b)=>{const I=o("el-button"),v=o("el-card");return $(),H(v,null,{default:t(()=>[e(I,{onClick:f},{default:t(()=>b[0]||(b[0]=[S("切换sku")])),_:1,__:[0]})]),_:1})}}}),pe=G({__name:"index",setup(m){let i=c(0),u=c(),f=c(),_=c(),b=c(),I=c(),v=c({id:0,spuName:"",description:"",category3Id:0,tmId:0}),g=c(1),U=c(10);K(_,()=>{_.value&&D()});const z=s=>{i.value=s},A=s=>{i.value=1,v.value=s},B=()=>{i.value=2},D=async()=>{let s=await ae(g.value,U.value,_.value);s.code==200&&(I.value=s.data,b.value=s.data.records)},q=s=>{U.value=s},a=s=>{g.value=s},l=s=>{console.log("c3Id",s)};return(s,n)=>{const x=o("el-card"),L=o("plus"),y=o("el-icon"),w=o("el-button"),k=o("el-table-column"),R=o("edit"),C=o("InfoFilled"),V=o("delete"),E=o("el-table"),j=o("el-pagination");return $(),O(Q,null,[e(x,{class:"box-card-up"},{default:t(()=>[e(le,{c1Id:d(u),"onUpdate:c1Id":n[0]||(n[0]=r=>h(u)?u.value=r:u=r),c2Id:d(f),"onUpdate:c2Id":n[1]||(n[1]=r=>h(f)?f.value=r:f=r),c3Id:d(_),"onUpdate:c3Id":n[2]||(n[2]=r=>h(_)?_.value=r:_=r),onCategoryChange:l},null,8,["c1Id","c2Id","c3Id"])]),_:1}),M(N("div",null,[e(x,{class:"box-card_down"},{default:t(()=>{var r;return[e(w,{class:"button",type:"primary",disabled:d(_)===void 0,onClick:n[3]||(n[3]=P=>A(d(v)))},{default:t(()=>[e(y,{style:{"vertical-align":"middle"}},{default:t(()=>[e(L)]),_:1}),n[6]||(n[6]=N("span",null,"添加SPU",-1))]),_:1,__:[6]},8,["disabled"]),e(E,{border:"",style:{margin:"10px 0",width:"100%"},data:d(b)},{default:t(()=>[e(k,{type:"index",label:"序号",width:"80"}),e(k,{prop:"spuName",label:"SPU名称",width:"230"}),e(k,{"show-overflow-tooltip":!0,prop:"description",label:"SPU描述",width:"350"}),e(k,{prop:"edit",label:"操作"},{default:t(({row:P,$index:p})=>[e(w,{type:"primary",onClick:J=>A(P)},{default:t(()=>[e(y,{style:{"vertical-align":"middle"}},{default:t(()=>[e(L)]),_:1})]),_:2},1032,["onClick"]),e(w,{type:"warning",onClick:B},{default:t(()=>[e(y,{style:{"vertical-align":"middle"}},{default:t(()=>[e(R)]),_:1})]),_:1}),e(w,{type:"info",onClick:n[4]||(n[4]=()=>{})},{default:t(()=>[e(y,{style:{"vertical-align":"middle"}},{default:t(()=>[e(C)]),_:1})]),_:1}),e(w,{type:"danger",onClick:n[5]||(n[5]=()=>{})},{default:t(()=>[e(y,{style:{"vertical-align":"middle"}},{default:t(()=>[e(V)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),e(j,{onSizeChange:q,onCurrentChange:a,"current-page":d(g),"page-sizes":[5,10,15,20],"page-size":d(U),layout:" prev, pager, next, jumper , -> ,total, sizes,",total:(r=d(I))==null?void 0:r.total},null,8,["current-page","page-size","total"])]}),_:1})],512),[[T,d(i)==0]]),N("div",null,[M(e(re,{onChangeSence:z,row:d(v)},null,8,["row"]),[[T,d(i)===1]])]),N("div",null,[M(e(ie,{onChangeSence:z},null,512),[[T,d(i)===2]])])],64)}}}),fe=te(pe,[["__scopeId","data-v-2a932c25"]]);export{fe as default};
