import{m as x,d as M,n as f,p as R,q as G,f as H,w as l,r as o,g as t,a as p,k as v,j as r,s as V,o as J,_ as K}from"./index-B65CSbob.js";const L=(u,b)=>x.get(`/admin/product/baseTrademark/${u}/${b}`),O=u=>x.post("/admin/product/baseTrademark/save",u),Q=u=>x.post("/admin/product/baseTrademark/update",u),W=u=>x.delete(`/admin/product/baseTrademark/remove/${u}`),X=["src"],Y={class:"dialog-footer"},Z=M({__name:"index",setup(u){let b=f(),w=f(1),i=f(1),m=f(10),n=f(!1),C=f(""),d=R({id:0,tmName:"",logoUrl:"/api/static/img/sph/20241210/oppo.jpeg"});const _=async(a=1,e)=>{let c=await L(a,e);w.value=c.data.total,b.value=c.data.records,i.value=c.data.current,e=c.data.size};G(()=>{_(i.value,m.value)});const z=a=>{C.value="修改品牌",d.tmName=a.tmName,d.id=a.id,n.value=!0},T=async a=>{(await W(a)).code===200?(_(1,10),alert("删除成功")):alert("删除失败")},q=a=>{m.value=a,_(i.value,a)},U=a=>{i.value=a,_(a,m.value)},B=()=>{d.tmName="",C.value="添加品牌",n.value=!0},$=async()=>{d.id!=0?(await Q(d)).code===200?(_(i.value,m.value),n.value=!1,alert("修改成功")):alert("修改失败"):(await O(d)).code===200?(_(i.value,m.value),n.value=!1,alert("添加成功")):alert("添加失败")};return(a,e)=>{const c=o("plus"),y=o("el-icon"),g=o("el-button"),k=o("el-table-column"),j=o("el-table"),D=o("el-pagination"),P=o("el-input"),N=o("el-form-item"),h=o("Plus"),S=o("el-upload"),A=o("el-form"),E=o("el-dialog"),F=o("el-card");return J(),H(F,{class:"box-card"},{header:l(()=>[t(g,{class:"button",type:"primary",onClick:B},{default:l(()=>[t(y,{style:{"vertical-align":"middle"}},{default:l(()=>[t(c)]),_:1}),e[3]||(e[3]=p("span",null,"添加品牌",-1))]),_:1,__:[3]})]),default:l(()=>[t(j,{data:r(b),border:"",style:{width:"100%"}},{default:l(()=>[t(k,{type:"index",label:"序号",width:"80"}),t(k,{prop:"tmName",label:"品牌名称",width:"180"}),t(k,{label:"品牌logo"},{default:l(s=>[p("img",{src:s.row.logoUrl,style:{width:"24px",height:"24px"}},null,8,X)]),_:1}),t(k,{prop:"edit",label:"品牌操作"},{default:l(s=>[t(g,{size:"mini",onClick:I=>z(s.row)},{default:l(()=>e[4]||(e[4]=[v("编辑")])),_:2,__:[4]},1032,["onClick"]),t(g,{size:"mini",type:"danger",onClick:I=>T(s.row.id)},{default:l(()=>e[5]||(e[5]=[v("删除")])),_:2,__:[5]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),p("span",null,[t(D,{onSizeChange:q,onCurrentChange:U,"current-page":r(i),"page-sizes":[5,10,20,30],"page-size":r(m),"prev-text":"上一页","next-text":"下一页",layout:"total,  prev, pager, next,sizes, jumper",total:r(w)},null,8,["current-page","page-size","total"])]),t(E,{title:r(C),modelValue:r(n),"onUpdate:modelValue":e[2]||(e[2]=s=>V(n)?n.value=s:n=s)},{footer:l(()=>[p("span",Y,[t(g,{onClick:e[1]||(e[1]=s=>V(n)?n.value=!1:n=!1)},{default:l(()=>e[8]||(e[8]=[v("取 消")])),_:1,__:[8]}),t(g,{type:"primary",onClick:$},{default:l(()=>e[9]||(e[9]=[v("确 定")])),_:1,__:[9]})])]),default:l(()=>[t(A,{model:r(d),"label-width":"80px"},{default:l(()=>[t(N,{label:"品牌名称"},{default:l(()=>[t(P,{modelValue:r(d).tmName,"onUpdate:modelValue":e[0]||(e[0]=s=>r(d).tmName=s),placeholder:"请输入品牌名称"},null,8,["modelValue"])]),_:1}),t(N,{label:"品牌logo"},{default:l(()=>[t(S,{class:"upload-demo",drag:"",action:"/admin/product/fileUpload",multiple:""},{tip:l(()=>e[6]||(e[6]=[p("div",{class:"el-upload__tip"},"只能上传 jpg/png 文件，且不超过 500kb",-1)])),default:l(()=>[t(y,null,{default:l(()=>[t(h)]),_:1}),e[7]||(e[7]=p("div",{class:"el-upload__text"},[v("将文件拖到此处，或"),p("em",null,"点击上传")],-1))]),_:1,__:[7]})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])]),_:1})}}}),te=K(Z,[["__scopeId","data-v-e8c39f0c"]]);export{te as default};
