import{_ as K,r as M,a as P,b as Q}from"./category.vue_vue_type_script_setup_true_lang-Bdsttfjt.js";import{d as W,m as p,x as X,c as B,g as t,w as l,r as u,F as D,b as Y,k as _,j as I,s as $,a as c,o as V,f as Z,t as h,_ as ee}from"./index-BtSRkBnv.js";const te={class:"button-group"},le={class:"dialog-footer"},ae=W({__name:"index",setup(oe){const g=p(0),w=p(0),s=p(0),f=p([]),n=p();let b=p(!0),d=p(!1),C=p("");const q=()=>{b.value=!1},z=()=>{b.value=!0,n.value.attrName=""},F=(o,e,y)=>{if(y===0){f.value=[];return}v()};X(s,()=>{if(s.value===0){f.value=[];return}v()});const v=async()=>{let o=await M(g.value,w.value,s.value);o.code===200?f.value=o.data:f.value=[]},T=async o=>{(await P(o)).code===200?(v(),alert("删除成功")):alert("删除失败")},j=o=>{C.value="修改属性",d.value=!0,n.value=o,b.value=!1},E=async()=>{var e;let o=await Q(n.value);(e=n.value)!=null&&e.id?o.code===200&&(v(),d.value=!1,alert("修改成功")):o.code===200&&(v(),d.value=!1,alert("添加成功"))},O=()=>{s.value===0||s.value===void 0||(d.value=!0,C.value="添加属性",n.value={attrName:"",categoryId:s.value,categoryLevel:3,attrValueList:[]})},R=()=>{n.value.attrValueList.push({valueName:"",attrId:0})},S=o=>{n.value.attrValueList=n.value.attrValueList.filter(e=>e.id!==o.id)};return(o,e)=>{const y=u("el-card"),x=u("plus"),k=u("el-icon"),i=u("el-button"),m=u("el-table-column"),G=u("el-tag"),N=u("el-table"),L=u("el-input"),U=u("el-form-item"),H=u("el-form"),J=u("el-dialog");return V(),B(D,null,[t(y,{class:"box-card_up"},{default:l(()=>[t(K,{c1Id:g.value,"onUpdate:c1Id":e[0]||(e[0]=a=>g.value=a),c2Id:w.value,"onUpdate:c2Id":e[1]||(e[1]=a=>w.value=a),c3Id:s.value,"onUpdate:c3Id":e[2]||(e[2]=a=>s.value=a),onCategoryChange:F},null,8,["c1Id","c2Id","c3Id"])]),_:1}),t(y,{class:"box-card_down"},{header:l(()=>[t(i,{class:"button",type:"primary",disabled:s.value===0,onClick:O},{default:l(()=>[t(k,{style:{"vertical-align":"middle"}},{default:l(()=>[t(x)]),_:1}),e[6]||(e[6]=c("span",null,"添加属性",-1))]),_:1,__:[6]},8,["disabled"])]),default:l(()=>[t(N,{data:f.value,border:"",style:{width:"100%"}},{default:l(()=>[t(m,{label:"序号",type:"index",width:"80px"}),t(m,{label:"属性名称",width:"200px",prop:"attrName"}),t(m,{label:"属性值名称"},{default:l(a=>[(V(!0),B(D,null,Y(a.row.attrValueList,r=>(V(),Z(G,{style:{margin:"5px"},key:r.id},{default:l(()=>[_(h(r.valueName),1)]),_:2},1024))),128))]),_:1}),t(m,{label:"操作",width:"300px"},{default:l(a=>[t(i,{type:"primary",size:"mini",onClick:r=>j(a.row)},{default:l(()=>e[7]||(e[7]=[_("修改")])),_:2,__:[7]},1032,["onClick"]),t(i,{type:"danger",size:"mini",onClick:r=>T(a.row.id)},{default:l(()=>e[8]||(e[8]=[_("删除")])),_:2,__:[8]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(J,{title:I(C),modelValue:I(d),"onUpdate:modelValue":e[5]||(e[5]=a=>$(d)?d.value=a:d=a)},{footer:l(()=>[c("span",le,[t(i,{onClick:e[4]||(e[4]=a=>$(d)?d.value=!1:d=!1)},{default:l(()=>e[12]||(e[12]=[_("取 消")])),_:1,__:[12]}),t(i,{type:"primary",onClick:E},{default:l(()=>e[13]||(e[13]=[_("确 定")])),_:1,__:[13]})])]),default:l(()=>[t(H,{model:n.value},{default:l(()=>[t(U,{label:"属性名称"},{default:l(()=>[t(L,{modelValue:n.value.attrName,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.attrName=a),onInput:q},null,8,["modelValue"])]),_:1}),t(U,{class:"attr-value-section"},{default:l(()=>{var a;return[c("div",te,[t(i,{type:"primary",disabled:I(b),onClick:R},{default:l(()=>[t(k,{style:{"vertical-align":"middle"}},{default:l(()=>[t(x)]),_:1}),e[9]||(e[9]=c("span",null,"添加属性值",-1))]),_:1,__:[9]},8,["disabled"]),t(i,{type:"normal",onClick:z,style:{"margin-left":"10px"}},{default:l(()=>e[10]||(e[10]=[c("span",null,"取消",-1)])),_:1,__:[10]})]),t(N,{border:"",data:(a=n.value)==null?void 0:a.attrValueList,"highlight-current-row":"",style:{width:"100%","margin-top":"20px"}},{default:l(()=>[t(m,{type:"index",width:"50"}),t(m,{property:"valueName",label:"属性值",width:"120"},{default:l(r=>[t(L,{modelValue:r.row.valueName,"onUpdate:modelValue":A=>r.row.valueName=A},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(m,{label:"操作"},{default:l(r=>[t(i,{type:"danger",size:"mini",onClick:A=>S(r.row)},{default:l(()=>e[11]||(e[11]=[_("删除")])),_:2,__:[11]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]}),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])]),_:1})],64)}}}),ue=ee(ae,[["__scopeId","data-v-a0cf962f"]]);export{ue as default};
