import{m as h,d as Q,n as f,q as R,f as m,w as a,r as s,g as e,a as r,j as g,z as W,A as X,B as Y,C as Z,D as $,c as C,e as ee,t as p,F as N,b as z,E as te,G as le,o as c,k as U,_ as ae}from"./index-Du_Ei7i5.js";const oe=(u,v)=>h.get(`/admin/product/list/${u}/${v}`),ne=u=>h.get(`/admin/product/getSkuInfo/${u}`),re=u=>h.get(`/admin/product/onSale/${u}`),se=u=>h.get(`/admin/product/cancelSale/${u}`),ue=u=>h.delete(`/admin/product/deleteSku/${u}`),ce=["src","alt"],ie={class:"pagination-container"},de={key:0},_e={class:"price"},pe={class:"desc"},fe={class:"attr-group"},me={class:"attr-group"},ve={class:"image-carousel"},ge=["src","alt"],he=Q({__name:"index",setup(u){var D;const v=te(),t=(D=v==null?void 0:v.proxy)==null?void 0:D.$message,V=f([]),w=f(1),b=f(10),B=f(0),x=f(!1),d=f(null),k=async()=>{try{const l=await oe(w.value,b.value);l.code===200&&(V.value=l.data.records,B.value=l.data.total)}catch{t==null||t.error("获取SKU列表失败")}},A=async l=>{try{l.isSale===1?(await se(l.id)).code===200&&(l.isSale=0,t==null||t.success("商品已下架")):(await re(l.id)).code===200&&(l.isSale=1,t==null||t.success("商品已上架"))}catch{t==null||t.error("操作失败")}},K=async l=>{try{const o=await ne(l.id);o.code===200&&(d.value=o.data,x.value=!0)}catch{t==null||t.error("获取SKU详情失败")}},j=l=>{console.log("编辑SKU:",l),t==null||t.info("编辑功能待实现")},E=async l=>{try{await le.confirm("确定要删除该SKU吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),(await ue(l)).code===200&&(t==null||t.success("删除成功"),k())}catch(o){o!=="cancel"&&(t==null||t.error("删除失败"))}},T=l=>{b.value=l,w.value=1,k()},q=l=>{w.value=l,k()};return R(()=>{k()}),(l,o)=>{const _=s("el-table-column"),S=s("el-icon"),y=s("el-button"),F=s("el-table"),M=s("el-pagination"),I=s("el-col"),L=s("el-tag"),G=s("el-row"),H=s("el-carousel-item"),J=s("el-carousel"),O=s("el-dialog"),P=s("el-card");return c(),m(P,{class:"sku-card"},{header:a(()=>o[1]||(o[1]=[r("div",{class:"card-header"},[r("span",null,"SKU列表")],-1)])),default:a(()=>[e(F,{data:V.value,border:"",style:{width:"100%"}},{default:a(()=>[e(_,{type:"index",label:"序号",width:"80"}),e(_,{prop:"skuName",label:"名称",width:"200"}),e(_,{prop:"skuDesc",label:"描述",width:"300","show-overflow-tooltip":!0}),e(_,{label:"默认图片",width:"120"},{default:a(n=>[r("img",{src:n.row.skuDefaultImg,style:{width:"80px",height:"80px","object-fit":"cover"},alt:n.row.skuName},null,8,ce)]),_:1}),e(_,{prop:"weight",label:"重量(g)",width:"120"}),e(_,{prop:"price",label:"价格(元)",width:"120"}),e(_,{label:"操作",width:"240"},{default:a(n=>[e(y,{type:n.row.isSale===1?"success":"warning",size:"small",onClick:i=>A(n.row)},{default:a(()=>[e(S,null,{default:a(()=>[n.row.isSale===1?(c(),m(g(W),{key:0})):(c(),m(g(X),{key:1}))]),_:2},1024)]),_:2},1032,["type","onClick"]),e(y,{type:"primary",size:"small",onClick:i=>j(n.row)},{default:a(()=>[e(S,null,{default:a(()=>[e(g(Y))]),_:1})]),_:2},1032,["onClick"]),e(y,{type:"info",size:"small",onClick:i=>K(n.row)},{default:a(()=>[e(S,null,{default:a(()=>[e(g(Z))]),_:1})]),_:2},1032,["onClick"]),e(y,{type:"danger",size:"small",onClick:i=>E(n.row.id)},{default:a(()=>[e(S,null,{default:a(()=>[e(g($))]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),r("div",ie,[e(M,{onSizeChange:T,onCurrentChange:q,"current-page":w.value,"page-sizes":[5,10,15,20],"page-size":b.value,layout:"prev, pager, next, jumper, -> ,total, sizes",total:B.value},null,8,["current-page","page-size","total"])]),e(O,{title:"查看商品详情",modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=n=>x.value=n),width:"80%",top:"10vh"},{default:a(()=>[d.value?(c(),C("div",de,[e(G,{gutter:20},{default:a(()=>[e(I,{span:12},{default:a(()=>[r("h3",null,p(d.value.skuName),1),r("div",_e,"价格：¥"+p(d.value.price),1),r("div",pe,p(d.value.skuDesc),1)]),_:1}),e(I,{span:12},{default:a(()=>[r("div",fe,[o[2]||(o[2]=r("h4",null,"平台属性",-1)),(c(!0),C(N,null,z(d.value.skuAttrValueList,(n,i)=>(c(),m(L,{key:i,style:{margin:"5px"}},{default:a(()=>[U(p(n.attrName)+"："+p(n.valueName),1)]),_:2},1024))),128))]),r("div",me,[o[3]||(o[3]=r("h4",null,"销售属性",-1)),(c(!0),C(N,null,z(d.value.skuSaleAttrValueList,(n,i)=>(c(),m(L,{key:i,style:{margin:"5px"}},{default:a(()=>[U(p(n.saleAttrName)+"："+p(n.saleAttrValueName),1)]),_:2},1024))),128))])]),_:1})]),_:1}),r("div",ve,[o[4]||(o[4]=r("h4",null,"商品图片",-1)),e(J,{interval:4e3,type:"card",height:"300px"},{default:a(()=>[(c(!0),C(N,null,z(d.value.skuImageList,(n,i)=>(c(),m(H,{key:i},{default:a(()=>[r("img",{src:n.imgUrl,style:{width:"100%",height:"100%","object-fit":"cover"},alt:n.imgName},null,8,ge)]),_:2},1024))),128))]),_:1})])])):ee("",!0)]),_:1},8,["modelValue"])]),_:1})}}}),ke=ae(he,[["__scopeId","data-v-e9e5375b"]]);export{ke as default};
